{"dependencies":[{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"yg7e6laZwmpbIvId5jovq9ugXp8=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/classPrivateFieldLooseBase","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"jktBven9cFmiXr10q2uuMiBaNBg=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/classPrivateFieldLooseKey","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YYsVumDWjUPySlBONhl8so2wff4=","exportNames":["*"],"imports":1}},{"name":"./timeoutManager.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":20},"end":{"line":2,"column":53,"index":73}}],"key":"pyQHMhdGxfRLqgunhFS/8/ELubI=","exportNames":["*"],"imports":1}},{"name":"./utils.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":74},"end":{"line":3,"column":54,"index":128}}],"key":"NIaSEHO1E48gsZc7jH9Ex1xTHgE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _gcTimeout; // src/removable.ts\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"Removable\", {\n    enumerable: true,\n    get: function () {\n      return Removable;\n    }\n  });\n  var _babelRuntimeHelpersClassCallCheck = require(_dependencyMap[0], \"@babel/runtime/helpers/classCallCheck\");\n  var _classCallCheck = _interopDefault(_babelRuntimeHelpersClassCallCheck);\n  var _babelRuntimeHelpersCreateClass = require(_dependencyMap[1], \"@babel/runtime/helpers/createClass\");\n  var _createClass = _interopDefault(_babelRuntimeHelpersCreateClass);\n  var _babelRuntimeHelpersClassPrivateFieldLooseBase = require(_dependencyMap[2], \"@babel/runtime/helpers/classPrivateFieldLooseBase\");\n  var _classPrivateFieldLooseBase = _interopDefault(_babelRuntimeHelpersClassPrivateFieldLooseBase);\n  var _babelRuntimeHelpersClassPrivateFieldLooseKey = require(_dependencyMap[3], \"@babel/runtime/helpers/classPrivateFieldLooseKey\");\n  var _classPrivateFieldLooseKey = _interopDefault(_babelRuntimeHelpersClassPrivateFieldLooseKey);\n  var _timeoutManagerJs = require(_dependencyMap[4], \"./timeoutManager.js\");\n  var _utilsJs = require(_dependencyMap[5], \"./utils.js\");\n  var Removable = (_gcTimeout = /*#__PURE__*/(0, _classPrivateFieldLooseKey.default)(\"gcTimeout\"), /*#__PURE__*/function () {\n    function Removable() {\n      (0, _classCallCheck.default)(this, Removable);\n      Object.defineProperty(this, _gcTimeout, {\n        writable: true,\n        value: void 0\n      });\n    }\n    return (0, _createClass.default)(Removable, [{\n      key: \"destroy\",\n      value: function destroy() {\n        this.clearGcTimeout();\n      }\n    }, {\n      key: \"scheduleGc\",\n      value: function scheduleGc() {\n        this.clearGcTimeout();\n        if ((0, _utilsJs.isValidTimeout)(this.gcTime)) {\n          (0, _classPrivateFieldLooseBase.default)(this, _gcTimeout)[_gcTimeout] = _timeoutManagerJs.timeoutManager.setTimeout(() => {\n            this.optionalRemove();\n          }, this.gcTime);\n        }\n      }\n    }, {\n      key: \"updateGcTime\",\n      value: function updateGcTime(newGcTime) {\n        this.gcTime = Math.max(this.gcTime || 0, newGcTime ?? (_utilsJs.isServer ? Infinity : 5 * 60 * 1e3));\n      }\n    }, {\n      key: \"clearGcTimeout\",\n      value: function clearGcTimeout() {\n        if ((0, _classPrivateFieldLooseBase.default)(this, _gcTimeout)[_gcTimeout]) {\n          _timeoutManagerJs.timeoutManager.clearTimeout((0, _classPrivateFieldLooseBase.default)(this, _gcTimeout)[_gcTimeout]);\n          (0, _classPrivateFieldLooseBase.default)(this, _gcTimeout)[_gcTimeout] = void 0;\n        }\n      }\n    }]);\n  }());\n});","lineCount":67,"map":[[4,18,1,0],[5,2,1,0,"Object"],[5,8,1,0],[5,9,1,0,"defineProperty"],[5,23,1,0],[5,24,1,0,"exports"],[5,31,1,0],[6,4,1,0,"value"],[6,9,1,0],[7,2,1,0],[8,2,1,0],[8,11,1,0,"_interopDefault"],[8,27,1,0,"e"],[8,28,1,0],[9,4,1,0],[9,11,1,0,"e"],[9,12,1,0],[9,16,1,0,"e"],[9,17,1,0],[9,18,1,0,"__esModule"],[9,28,1,0],[9,31,1,0,"e"],[9,32,1,0],[10,6,1,0,"default"],[10,13,1,0],[10,15,1,0,"e"],[11,4,1,0],[12,2,1,0],[13,2,30,0,"Object"],[13,8,30,0],[13,9,30,0,"defineProperty"],[13,23,30,0],[13,24,30,0,"exports"],[13,31,30,0],[14,4,30,0,"enumerable"],[14,14,30,0],[15,4,30,0,"get"],[15,7,30,0],[15,18,30,0,"get"],[15,19,30,0],[16,6,30,0],[16,13,31,2,"Removable"],[16,22,31,11],[17,4,31,11],[18,2,31,11],[19,2,32,2],[19,6,32,2,"_babelRuntimeHelpersClassCallCheck"],[19,40,32,2],[19,43,32,2,"require"],[19,50,32,2],[19,51,32,2,"_dependencyMap"],[19,65,32,2],[20,2,32,2],[20,6,32,2,"_classCallCheck"],[20,21,32,2],[20,24,32,2,"_interopDefault"],[20,39,32,2],[20,40,32,2,"_babelRuntimeHelpersClassCallCheck"],[20,74,32,2],[21,2,32,2],[21,6,32,2,"_babelRuntimeHelpersCreateClass"],[21,37,32,2],[21,40,32,2,"require"],[21,47,32,2],[21,48,32,2,"_dependencyMap"],[21,62,32,2],[22,2,32,2],[22,6,32,2,"_createClass"],[22,18,32,2],[22,21,32,2,"_interopDefault"],[22,36,32,2],[22,37,32,2,"_babelRuntimeHelpersCreateClass"],[22,68,32,2],[23,2,32,2],[23,6,32,2,"_babelRuntimeHelpersClassPrivateFieldLooseBase"],[23,52,32,2],[23,55,32,2,"require"],[23,62,32,2],[23,63,32,2,"_dependencyMap"],[23,77,32,2],[24,2,32,2],[24,6,32,2,"_classPrivateFieldLooseBase"],[24,33,32,2],[24,36,32,2,"_interopDefault"],[24,51,32,2],[24,52,32,2,"_babelRuntimeHelpersClassPrivateFieldLooseBase"],[24,98,32,2],[25,2,32,2],[25,6,32,2,"_babelRuntimeHelpersClassPrivateFieldLooseKey"],[25,51,32,2],[25,54,32,2,"require"],[25,61,32,2],[25,62,32,2,"_dependencyMap"],[25,76,32,2],[26,2,32,2],[26,6,32,2,"_classPrivateFieldLooseKey"],[26,32,32,2],[26,35,32,2,"_interopDefault"],[26,50,32,2],[26,51,32,2,"_babelRuntimeHelpersClassPrivateFieldLooseKey"],[26,96,32,2],[27,2,2,0],[27,6,2,0,"_timeoutManagerJs"],[27,23,2,0],[27,26,2,0,"require"],[27,33,2,0],[27,34,2,0,"_dependencyMap"],[27,48,2,0],[28,2,3,0],[28,6,3,0,"_utilsJs"],[28,14,3,0],[28,17,3,0,"require"],[28,24,3,0],[28,25,3,0,"_dependencyMap"],[28,39,3,0],[29,2,4,0],[29,6,4,4,"Removable"],[29,15,4,13],[29,19,4,13,"_gcTimeout"],[29,29,4,13],[29,49,4,13,"_classPrivateFieldLooseKey"],[29,75,4,13],[29,76,4,13,"default"],[29,83,4,13],[30,4,4,13],[30,13,4,13,"Removable"],[30,23,4,13],[31,6,4,13],[31,10,4,13,"_classCallCheck"],[31,25,4,13],[31,26,4,13,"default"],[31,33,4,13],[31,41,4,13,"Removable"],[31,50,4,13],[32,6,4,13,"Object"],[32,12,4,13],[32,13,4,13,"defineProperty"],[32,27,4,13],[32,34,4,13,"_gcTimeout"],[32,44,4,13],[33,8,4,13,"writable"],[33,16,4,13],[34,8,4,13,"value"],[34,13,4,13],[35,6,4,13],[36,4,4,13],[37,4,4,13],[37,15,4,13,"_createClass"],[37,27,4,13],[37,28,4,13,"default"],[37,35,4,13],[37,37,4,13,"Removable"],[37,46,4,13],[38,6,4,13,"key"],[38,9,4,13],[39,6,4,13,"value"],[39,11,4,13],[39,13,6,2],[39,22,6,2,"destroy"],[39,29,6,9,"destroy"],[39,30,6,9],[39,32,6,12],[40,8,7,4],[40,12,7,8],[40,13,7,9,"clearGcTimeout"],[40,27,7,23],[40,28,7,24],[40,29,7,25],[41,6,8,2],[42,4,8,3],[43,6,8,3,"key"],[43,9,8,3],[44,6,8,3,"value"],[44,11,8,3],[44,13,9,2],[44,22,9,2,"scheduleGc"],[44,32,9,12,"scheduleGc"],[44,33,9,12],[44,35,9,15],[45,8,10,4],[45,12,10,8],[45,13,10,9,"clearGcTimeout"],[45,27,10,23],[45,28,10,24],[45,29,10,25],[46,8,11,4],[46,12,11,8],[46,16,11,8,"isValidTimeout"],[46,24,11,22],[46,25,11,22,"isValidTimeout"],[46,39,11,22],[46,41,11,23],[46,45,11,27],[46,46,11,28,"gcTime"],[46,52,11,34],[46,53,11,35],[46,55,11,37],[47,10,12,6],[47,14,12,6,"_classPrivateFieldLooseBase"],[47,41,12,6],[47,42,12,6,"default"],[47,49,12,6],[47,55,12,10],[47,57,12,10,"_gcTimeout"],[47,67,12,10],[47,69,12,10,"_gcTimeout"],[47,79,12,10],[47,83,12,24,"timeoutManager"],[47,100,12,38],[47,101,12,38,"timeoutManager"],[47,115,12,38],[47,116,12,39,"setTimeout"],[47,126,12,49],[47,127,12,50],[47,133,12,56],[48,12,13,8],[48,16,13,12],[48,17,13,13,"optionalRemove"],[48,31,13,27],[48,32,13,28],[48,33,13,29],[49,10,14,6],[49,11,14,7],[49,13,14,9],[49,17,14,13],[49,18,14,14,"gcTime"],[49,24,14,20],[49,25,14,21],[50,8,15,4],[51,6,16,2],[52,4,16,3],[53,6,16,3,"key"],[53,9,16,3],[54,6,16,3,"value"],[54,11,16,3],[54,13,17,2],[54,22,17,2,"updateGcTime"],[54,34,17,14,"updateGcTime"],[54,35,17,15,"newGcTime"],[54,44,17,24],[54,46,17,26],[55,8,18,4],[55,12,18,8],[55,13,18,9,"gcTime"],[55,19,18,15],[55,22,18,18,"Math"],[55,26,18,22],[55,27,18,23,"max"],[55,30,18,26],[55,31,19,6],[55,35,19,10],[55,36,19,11,"gcTime"],[55,42,19,17],[55,46,19,21],[55,47,19,22],[55,49,20,6,"newGcTime"],[55,58,20,15],[55,63,20,20,"isServer"],[55,71,20,28],[55,72,20,28,"isServer"],[55,80,20,28],[55,83,20,31,"Infinity"],[55,91,20,39],[55,94,20,42],[55,95,20,43],[55,98,20,46],[55,100,20,48],[55,103,20,51],[55,106,20,54],[55,107,21,4],[55,108,21,5],[56,6,22,2],[57,4,22,3],[58,6,22,3,"key"],[58,9,22,3],[59,6,22,3,"value"],[59,11,22,3],[59,13,23,2],[59,22,23,2,"clearGcTimeout"],[59,36,23,16,"clearGcTimeout"],[59,37,23,16],[59,39,23,19],[60,8,24,4],[60,16,24,4,"_classPrivateFieldLooseBase"],[60,43,24,4],[60,44,24,4,"default"],[60,51,24,4],[60,53,24,8],[60,57,24,12],[60,59,24,12,"_gcTimeout"],[60,69,24,12],[60,71,24,12,"_gcTimeout"],[60,81,24,12],[60,84,24,25],[61,10,25,6,"timeoutManager"],[61,27,25,20],[61,28,25,20,"timeoutManager"],[61,42,25,20],[61,43,25,21,"clearTimeout"],[61,55,25,33],[61,60,25,33,"_classPrivateFieldLooseBase"],[61,87,25,33],[61,88,25,33,"default"],[61,95,25,33],[61,97,25,34],[61,101,25,38],[61,103,25,38,"_gcTimeout"],[61,113,25,38],[61,115,25,38,"_gcTimeout"],[61,125,25,38],[61,126,25,49],[61,127,25,50],[62,10,26,6],[62,14,26,6,"_classPrivateFieldLooseBase"],[62,41,26,6],[62,42,26,6,"default"],[62,49,26,6],[62,55,26,10],[62,57,26,10,"_gcTimeout"],[62,67,26,10],[62,69,26,10,"_gcTimeout"],[62,79,26,10],[62,83,26,24],[62,88,26,29],[62,89,26,30],[63,8,27,4],[64,6,28,2],[65,4,28,3],[66,2,28,3],[66,6,29,1],[67,0,29,2],[67,3]],"functionMap":{"names":["<global>","Removable","Removable#destroy","Removable#scheduleGc","timeoutManager.setTimeout$argument_0","Removable#updateGcTime","Removable#clearGcTimeout"],"mappings":"AAA;gBCG;ECE;GDE;EEC;kDCG;ODE;GFE;EIC;GJK;EKC;GLK;CDC"},"hasCjsExports":false},"type":"js/module"}]}