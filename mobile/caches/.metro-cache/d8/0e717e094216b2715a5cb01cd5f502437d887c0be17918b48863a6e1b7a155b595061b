{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"./ExpoFetchModule","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":52,"index":52}}],"key":"P9B3pIKSP9EYrIHgHPsfGsqsIiM=","exportNames":["*"],"imports":1}},{"name":"./FetchErrors","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":53},"end":{"line":2,"column":43,"index":96}}],"key":"Py0AbJgz4NJxZsrHxsD2TKxsTxE=","exportNames":["*"],"imports":1}},{"name":"./FetchResponse","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":97},"end":{"line":3,"column":87,"index":184}}],"key":"sbqEEymZQmLSD/FlxJCSc4reIHw=","exportNames":["*"],"imports":1}},{"name":"./RequestUtils","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":253},"end":{"line":5,"column":95,"index":348}}],"key":"VOVFPapf0K7jZRsy9lUvCV1ZSC0=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.fetch = fetch;\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _ExpoFetchModule = require(_dependencyMap[1], \"./ExpoFetchModule\");\n  var _FetchErrors = require(_dependencyMap[2], \"./FetchErrors\");\n  var _FetchResponse = require(_dependencyMap[3], \"./FetchResponse\");\n  var _RequestUtils = require(_dependencyMap[4], \"./RequestUtils\");\n  // TODO(@kitten): Do we really want to use our own types for web standards?\n  function fetch(_x, _x2) {\n    return _fetch.apply(this, arguments);\n  }\n  /**\n   * A wrapper of `AbortSignal.addEventListener` that returns a cleanup function.\n   */\n  function _fetch() {\n    _fetch = (0, _asyncToGenerator.default)(function* (url, init) {\n      var abortSubscription = null;\n      var response = new _FetchResponse.FetchResponse(() => {\n        abortSubscription?.();\n      });\n      var request = new _ExpoFetchModule.ExpoFetchModule.NativeRequest(response);\n      var headers = (0, _RequestUtils.normalizeHeadersInit)(init?.headers);\n      var _yield$normalizeBodyI = yield (0, _RequestUtils.normalizeBodyInitAsync)(init?.body),\n        requestBody = _yield$normalizeBodyI.body,\n        overriddenHeaders = _yield$normalizeBodyI.overriddenHeaders;\n      if (overriddenHeaders) {\n        headers = (0, _RequestUtils.overrideHeaders)(headers, overriddenHeaders);\n      }\n      var nativeRequestInit = {\n        credentials: init?.credentials ?? 'include',\n        headers,\n        method: init?.method ?? 'GET',\n        redirect: init?.redirect ?? 'follow'\n      };\n      if (init?.signal && init.signal.aborted) {\n        throw new _FetchErrors.FetchError('The operation was aborted.');\n      }\n      abortSubscription = addAbortSignalListener(init?.signal, () => {\n        request.cancel();\n      });\n      try {\n        yield request.start(url, nativeRequestInit, requestBody);\n      } catch (e) {\n        if (e instanceof Error) {\n          throw _FetchErrors.FetchError.createFromError(e);\n        } else {\n          throw new _FetchErrors.FetchError(String(e));\n        }\n      }\n      return response;\n    });\n    return _fetch.apply(this, arguments);\n  }\n  function addAbortSignalListener(signal, listener) {\n    signal?.addEventListener('abort', listener);\n    return () => {\n      signal?.removeEventListener('abort', listener);\n    };\n  }\n});","lineCount":71,"map":[[12,2,9,0,"exports"],[12,9,9,0],[12,10,9,0,"fetch"],[12,15,9,0],[12,18,9,0,"fetch"],[12,23,9,0],[13,2,47,1],[13,6,47,1,"_babelRuntimeHelpersAsyncToGenerator"],[13,42,47,1],[13,45,47,1,"require"],[13,52,47,1],[13,53,47,1,"_dependencyMap"],[13,67,47,1],[14,2,47,1],[14,6,47,1,"_asyncToGenerator"],[14,23,47,1],[14,26,47,1,"_interopDefault"],[14,41,47,1],[14,42,47,1,"_babelRuntimeHelpersAsyncToGenerator"],[14,78,47,1],[15,2,1,0],[15,6,1,0,"_ExpoFetchModule"],[15,22,1,0],[15,25,1,0,"require"],[15,32,1,0],[15,33,1,0,"_dependencyMap"],[15,47,1,0],[16,2,2,0],[16,6,2,0,"_FetchErrors"],[16,18,2,0],[16,21,2,0,"require"],[16,28,2,0],[16,29,2,0,"_dependencyMap"],[16,43,2,0],[17,2,3,0],[17,6,3,0,"_FetchResponse"],[17,20,3,0],[17,23,3,0,"require"],[17,30,3,0],[17,31,3,0,"_dependencyMap"],[17,45,3,0],[18,2,5,0],[18,6,5,0,"_RequestUtils"],[18,19,5,0],[18,22,5,0,"require"],[18,29,5,0],[18,30,5,0,"_dependencyMap"],[18,44,5,0],[19,2,8,0],[20,2,8,0],[20,11,9,22,"fetch"],[20,16,9,27,"fetch"],[20,17,9,27,"_x"],[20,19,9,27],[20,21,9,27,"_x2"],[20,24,9,27],[21,4,9,27],[21,11,9,27,"_fetch"],[21,17,9,27],[21,18,9,27,"apply"],[21,23,9,27],[21,30,9,27,"arguments"],[21,39,9,27],[22,2,9,27],[23,2,49,0],[24,0,50,0],[25,0,51,0],[26,2,49,0],[26,11,49,0,"_fetch"],[26,18,49,0],[27,4,49,0,"_fetch"],[27,10,49,0],[27,17,49,0,"_asyncToGenerator"],[27,34,49,0],[27,35,49,0,"default"],[27,42,49,0],[27,44,9,7],[27,55,9,28,"url"],[27,58,9,39],[27,60,9,41,"init"],[27,64,9,64],[27,66,9,90],[28,6,10,2],[28,10,10,6,"abortSubscription"],[28,27,10,64],[28,30,10,67],[28,34,10,71],[29,6,12,2],[29,10,12,8,"response"],[29,18,12,16],[29,21,12,19],[29,25,12,23,"FetchResponse"],[29,39,12,36],[29,40,12,36,"FetchResponse"],[29,53,12,36],[29,54,12,37],[29,60,12,43],[30,8,13,4,"abortSubscription"],[30,25,13,21],[30,28,13,24],[30,29,13,25],[31,6,14,2],[31,7,14,3],[31,8,14,4],[32,6,15,2],[32,10,15,8,"request"],[32,17,15,15],[32,20,15,18],[32,24,15,22,"ExpoFetchModule"],[32,40,15,37],[32,41,15,37,"ExpoFetchModule"],[32,56,15,37],[32,57,15,38,"NativeRequest"],[32,70,15,51],[32,71,15,52,"response"],[32,79,15,60],[32,80,15,78],[33,6,17,2],[33,10,17,6,"headers"],[33,17,17,13],[33,20,17,16],[33,24,17,16,"normalizeHeadersInit"],[33,37,17,36],[33,38,17,36,"normalizeHeadersInit"],[33,58,17,36],[33,60,17,37,"init"],[33,64,17,41],[33,66,17,43,"headers"],[33,73,17,50],[33,74,17,51],[34,6,19,2],[34,10,19,2,"_yield$normalizeBodyI"],[34,31,19,2],[34,40,19,57],[34,44,19,57,"normalizeBodyInitAsync"],[34,57,19,79],[34,58,19,79,"normalizeBodyInitAsync"],[34,80,19,79],[34,82,19,80,"init"],[34,86,19,84],[34,88,19,86,"body"],[34,92,19,90],[34,93,19,91],[35,8,19,16,"requestBody"],[35,19,19,27],[35,22,19,27,"_yield$normalizeBodyI"],[35,43,19,27],[35,44,19,10,"body"],[35,48,19,14],[36,8,19,29,"overriddenHeaders"],[36,25,19,46],[36,28,19,46,"_yield$normalizeBodyI"],[36,49,19,46],[36,50,19,29,"overriddenHeaders"],[36,67,19,46],[37,6,20,2],[37,10,20,6,"overriddenHeaders"],[37,27,20,23],[37,29,20,25],[38,8,21,4,"headers"],[38,15,21,11],[38,18,21,14],[38,22,21,14,"overrideHeaders"],[38,35,21,29],[38,36,21,29,"overrideHeaders"],[38,51,21,29],[38,53,21,30,"headers"],[38,60,21,37],[38,62,21,39,"overriddenHeaders"],[38,79,21,56],[38,80,21,57],[39,6,22,2],[40,6,24,2],[40,10,24,8,"nativeRequestInit"],[40,27,24,44],[40,30,24,47],[41,8,25,4,"credentials"],[41,19,25,15],[41,21,25,17,"init"],[41,25,25,21],[41,27,25,23,"credentials"],[41,38,25,34],[41,42,25,38],[41,51,25,47],[42,8,26,4,"headers"],[42,15,26,11],[43,8,27,4,"method"],[43,14,27,10],[43,16,27,12,"init"],[43,20,27,16],[43,22,27,18,"method"],[43,28,27,24],[43,32,27,28],[43,37,27,33],[44,8,28,4,"redirect"],[44,16,28,12],[44,18,28,14,"init"],[44,22,28,18],[44,24,28,20,"redirect"],[44,32,28,28],[44,36,28,32],[45,6,29,2],[45,7,29,3],[46,6,31,2],[46,10,31,6,"init"],[46,14,31,10],[46,16,31,12,"signal"],[46,22,31,18],[46,26,31,22,"init"],[46,30,31,26],[46,31,31,27,"signal"],[46,37,31,33],[46,38,31,34,"aborted"],[46,45,31,41],[46,47,31,43],[47,8,32,4],[47,14,32,10],[47,18,32,14,"FetchError"],[47,30,32,24],[47,31,32,24,"FetchError"],[47,41,32,24],[47,42,32,25],[47,70,32,53],[47,71,32,54],[48,6,33,2],[49,6,34,2,"abortSubscription"],[49,23,34,19],[49,26,34,22,"addAbortSignalListener"],[49,48,34,44],[49,49,34,45,"init"],[49,53,34,49],[49,55,34,51,"signal"],[49,61,34,57],[49,63,34,59],[49,69,34,65],[50,8,35,4,"request"],[50,15,35,11],[50,16,35,12,"cancel"],[50,22,35,18],[50,23,35,19],[50,24,35,20],[51,6,36,2],[51,7,36,3],[51,8,36,4],[52,6,37,2],[52,10,37,6],[53,8,38,4],[53,14,38,10,"request"],[53,21,38,17],[53,22,38,18,"start"],[53,27,38,23],[53,28,38,24,"url"],[53,31,38,27],[53,33,38,29,"nativeRequestInit"],[53,50,38,46],[53,52,38,48,"requestBody"],[53,63,38,59],[53,64,38,60],[54,6,39,2],[54,7,39,3],[54,8,39,4],[54,15,39,11,"e"],[54,16,39,21],[54,18,39,23],[55,8,40,4],[55,12,40,8,"e"],[55,13,40,9],[55,25,40,21,"Error"],[55,30,40,26],[55,32,40,28],[56,10,41,6],[56,16,41,12,"FetchError"],[56,28,41,22],[56,29,41,22,"FetchError"],[56,39,41,22],[56,40,41,23,"createFromError"],[56,55,41,38],[56,56,41,39,"e"],[56,57,41,40],[56,58,41,41],[57,8,42,4],[57,9,42,5],[57,15,42,11],[58,10,43,6],[58,16,43,12],[58,20,43,16,"FetchError"],[58,32,43,26],[58,33,43,26,"FetchError"],[58,43,43,26],[58,44,43,27,"String"],[58,50,43,33],[58,51,43,34,"e"],[58,52,43,35],[58,53,43,36],[58,54,43,37],[59,8,44,4],[60,6,45,2],[61,6,46,2],[61,13,46,9,"response"],[61,21,46,17],[62,4,47,0],[62,5,47,1],[63,4,47,1],[63,11,47,1,"_fetch"],[63,17,47,1],[63,18,47,1,"apply"],[63,23,47,1],[63,30,47,1,"arguments"],[63,39,47,1],[64,2,47,1],[65,2,52,0],[65,11,52,9,"addAbortSignalListener"],[65,33,52,31,"addAbortSignalListener"],[65,34,53,2,"signal"],[65,40,53,33],[65,42,54,2,"listener"],[65,50,54,58],[65,52,55,36],[66,4,56,2,"signal"],[66,10,56,8],[66,12,56,10,"addEventListener"],[66,28,56,26],[66,29,56,27],[66,36,56,34],[66,38,56,36,"listener"],[66,46,56,44],[66,47,56,45],[67,4,57,2],[67,11,57,9],[67,17,57,15],[68,6,58,4,"signal"],[68,12,58,10],[68,14,58,12,"removeEventListener"],[68,33,58,31],[68,34,58,32],[68,41,58,39],[68,43,58,41,"listener"],[68,51,58,49],[68,52,58,50],[69,4,59,2],[69,5,59,3],[70,2,60,0],[71,0,60,1],[71,3]],"functionMap":{"names":["<global>","fetch","FetchResponse$argument_0","addAbortSignalListener$argument_1","addAbortSignalListener","<anonymous>"],"mappings":"AAA;OCQ;qCCG;GDE;2DEoB;GFE;CDW;AIK;SCK;GDE;CJC"},"hasCjsExports":false},"type":"js/module"}]}